RewriteEngine On

# Security: deny access to dotfiles if the docroot is project root
<FilesMatch "^\.">
	Require all denied
</FilesMatch>
Options -Indexes

# Favicon to brand icon without hard-coded base path (works regardless of folder name)
RewriteRule ^favicon\.ico$ public/assets/img/logo.png [L]
RewriteRule ^favicon\.png$ public/assets/img/logo.png [L]
RewriteRule ^apple-touch-icon(.*)\.png$ public/assets/img/logo.png [L]
RewriteRule ^android-chrome-(.*)\.png$ public/assets/img/logo.png [L]

# Short-circuit if already under /public to avoid loops
RewriteRule ^public/ - [L]

# Route EVERYTHING else into /public (even if a file exists at repo root) to prevent accidental exposure
RewriteRule ^(.*)$ public/$1 [L,QSA]
